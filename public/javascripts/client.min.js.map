{"version":3,"file":"client.min.js","sources":["client.js"],"sourcesContent":["const httpJSONRequest = function(url){\r\n    return new Promise(function(resolve, reject)\r\n    {\r\n        console.log(url);\r\n        let xhr = new XMLHttpRequest();\r\n\r\n        xhr.withCredentials = false;\r\n        xhr.open('GET', url, true);\r\n        xhr.send();\r\n        xhr.addEventListener(\"readystatechange\", processRequest, false);\r\n\r\n        function processRequest(e) {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                let response = JSON.parse(xhr.responseText);\r\n                resolve(response);\r\n            }else if (xhr.readyState == 4) {\r\n                console.log(xhr.readyState);\r\n                console.log(xhr.status);\r\n                reject(Error(\"Something went wrong with the request \\n\\t\\t\\t\\t\\t XHR Status: \" + xhr.status));\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nhttpJSONRequest(\"http://cost-comparison.azurewebsites.net/testIP\")\r\n    .then((json) => document.getElementById(\"col1\").appendChild(document.createElement('pre')).innerHTML = syntaxHighlight(json));\r\n\r\nhttpJSONRequest(\"http://cost-comparison.azurewebsites.net/numbeo\")\r\n    .then(function(json)  {\r\n        console.log(\"Before filter: \" + json[0].prices.length);\r\n        json[0].prices = json[0].prices.filter(obj => obj.average_price<10);\r\n        console.log(\"After filter: \" + json[0].prices.length);\r\n\r\n        let barHeight = 29;\r\n        let margin = {top: 20, right: 30, bottom: 30, left: 40},\r\n            width = 600 - margin.left - margin.right,\r\n            height = 500 - margin.top - margin.bottom;\r\n\r\n        let x = d3.scaleLinear()\r\n            .domain([0, d3.max(json[0].prices, obj => obj.average_price)])\r\n            .range([0, width]);\r\n\r\n        let xText = d3.scaleLinear()\r\n            .domain([0, d3.max(json[0].prices, obj => obj.item_name.length)])\r\n            .range([0, width]);\r\n\r\n        let chart = d3.select(\".chart\")\r\n                .attr(\"width\", width + margin.left + margin.right)\r\n                .attr(\"height\", ((barHeight+1) * json[0].prices.length)+ margin.top + margin.bottom)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + 0 + \",\" + margin.top + \")\");\r\n\r\n        chart.append(\"g\")\r\n                .attr(\"class\", \"axis axis--x\")\r\n                .call(d3.axisTop(x).ticks(10, \"$\"))\r\n                .attr(\"transform\", \"translate(\" + 0 + \", 0)\")\r\n            .append(\"text\")\r\n                .attr(\"x\", 6)\r\n                .attr(\"dx\", \"0.71em\")\r\n                .attr(\"text-anchor\", \"end\")\r\n                .text(\"Price\")\r\n                .attr(\"transform\", \"translate(\" + 20 + \", -9)\");\r\n\r\n        let bar = chart.selectAll(\"g\")\r\n                .data(json[0].prices)\r\n            .enter().append(\"g\")\r\n                .attr(\"transform\", function(d, i) {\r\n                    return \"translate(0,\" + (i - 8) * (barHeight + 1) + \")\"; });\r\n\r\n        bar.append(\"rect\")\r\n            .attr(\"width\", function(d) {return x(d.average_price);})\r\n            .attr(\"height\", barHeight)\r\n            .attr(\"class\", \"bar\");\r\n\r\n        bar.append(\"text\")\r\n            .attr(\"x\", function(d) { return xText(d.item_name.length);})\r\n            .attr(\"y\", barHeight / 2)\r\n            .attr(\"dy\", \".35em\")\r\n            .text(function(d) { return d.item_name; });\r\n        document.getElementById(\"col2\").appendChild(document.createElement('pre')).innerHTML = syntaxHighlight(json[0]);\r\n    });\r\n\r\n// Pretty JSON\r\n\r\n\r\nfunction syntaxHighlight(json) {\r\n    if (typeof json != 'string') {\r\n        json = JSON.stringify(json, undefined, 2);\r\n    }\r\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\r\n        var cls = 'number';\r\n        if (/^\"/.test(match)) {\r\n            if (/:$/.test(match)) {\r\n                cls = 'key';\r\n            } else {\r\n                cls = 'string';\r\n            }\r\n        } else if (/true|false/.test(match)) {\r\n            cls = 'boolean';\r\n        } else if (/null/.test(match)) {\r\n            cls = 'null';\r\n        }\r\n        return '<span class=\"' + cls + '\">' + match + '</span>';\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":["httpJSONRequest","url","Promise","resolve","reject","log","xhr","XMLHttpRequest","withCredentials","open","send","addEventListener","processRequest","e","readyState","status","response","JSON","parse","responseText","Error","then","json","document","getElementById","appendChild","createElement","innerHTML","syntaxHighlight","prices","length","filter","obj","average_price","barHeight","margin","top","right","bottom","left","width","height","x","d3","scaleLinear","domain","max","range","xText","item_name","chart","select","attr","append","call","axisTop","ticks","text","bar","selectAll","data","enter","d","i","stringify","undefined","replace","match","cls","test"],"mappings":"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"}